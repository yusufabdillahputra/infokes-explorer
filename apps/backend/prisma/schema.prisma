generator client {
  provider      = "prisma-client-js"
  output        = "../generated/prisma"
  binaryTargets = ["native", "debian-openssl-3.0.x", "darwin", "windows"]
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

generator prismabox {
  provider                    = "prismabox"
  typeboxImportDependencyName = "elysia"
  typeboxImportVariableName   = "t"
  inputModel                  = true
  output                      = "../generated/prismabox"
}

enum SubFolderType {
  FOLDER
  FILE
}

model SubFolder {
  id   Int           @id @default(autoincrement())
  name String
  type SubFolderType @default(FOLDER)

  // Relasi ke RootFolder
  rootFolderId Int
  root         RootFolder @relation(fields: [rootFolderId], references: [id], onDelete: Cascade)

  // Self-relation: parent
  parentId Int? // nullable, karena bisa root folder
  parent   SubFolder? @relation("SubfolderToSubfolder", fields: [parentId], references: [id], onDelete: Cascade)

  subs SubFolder[] @relation("SubfolderToSubfolder")
}

model RootFolder {
  id   Int         @id @default(autoincrement())
  name String
  subs SubFolder[]
}
